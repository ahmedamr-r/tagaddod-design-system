import { Meta, Canvas, Story, ArgTypes, Source } from '@storybook/blocks';
import { Sonner, showSonner } from './Sonner';
import * as SonnerStories from './Sonner.stories';

<Meta of={SonnerStories} />

# Sonner

The Sonner component is a modern toast notification system that follows our Figma design specifications exactly. It provides three distinct toast types (Error, Success, Default) with consistent typography, spacing, and comprehensive RTL/LTR support.

## Overview

Sonner offers a powerful toast notification system with:

- **Design System Aligned**: Matches Figma specifications with exact colors, typography, and spacing
- **Three Toast Types**: Error (red #d51e25), Success (green #00ae61), and Default (white) variants
- **Icon Background Options**: Icons can be displayed with or without background containers
- **Built-in Close Button**: Always-visible close button with proper RTL/LTR positioning
- **RTL/LTR Support**: Complete layout mirroring and text alignment for different directions
- **Outfit Typography**: Uses Outfit font family with proper weights (Medium 500, Regular 400)
- **Accessibility**: Full keyboard navigation and screen reader support
- **Stacking Behavior**: Proper toast stacking with Sonner 2.0+ features

## Installation & Setup

First, add the Sonner component to your application root:

<Source
  language="tsx"
  code={`
import { Sonner } from '@tagaddod-design/react';

function App() {
  return (
    <div>
      {/* Your app content */}
      <Sonner position="bottom-right" />
    </div>
  );
}
`}
/>

Then use the toast functions anywhere in your application:

<Source
  language="tsx"
  code={`
import { showSonner } from '@tagaddod-design/react';

function MyComponent() {
  const handleSuccess = () => {
    showSonner.success({
      title: 'Success!',
      description: 'Your action was completed successfully.'
    });
  };

  return <button onClick={handleSuccess}>Show Success Toast</button>;
}
`}
/>

## Basic Usage

<Canvas of={SonnerStories.Default} />

## Toast Types

Our design system includes three main toast types based on the Figma specifications:

<Canvas of={SonnerStories.ToastTypes} />

### Available Types

- **Error**: Red background (#d51e25) with white text - for error messages and failures
- **Success**: Green background (#00ae61) with white text - for completed actions and positive feedback  
- **Default**: White background (#ffffff) with dark text - for general information and neutral messages

### Icon Background Options

Icons can be displayed with or without background containers:

<Canvas of={SonnerStories.IconBackgroundVariants} />

- **With Background**: Icons get a rounded background container (20% white opacity for colored toasts, #f9f9fa for default)
- **Without Background**: Icons are displayed directly without any background container

## Toast with Actions

Add interactive buttons to your toasts for better user engagement:

<Canvas of={SonnerStories.WithActions} />

<Source
  language="tsx"
  code={`
// Toast with single action
showSonner.info({
  title: 'New Message',
  description: 'You have a new message from John.',
  action: {
    label: 'View',
    onClick: () => console.log('Viewing message')
  }
});

// Toast with action and cancel
showSonner.warning({
  title: 'Unsaved Changes',
  description: 'You have unsaved changes.',
  action: {
    label: 'Save',
    onClick: () => console.log('Saving')
  },
  cancel: {
    label: 'Discard',
    onClick: () => console.log('Discarding')
  }
});
`}
/>

## RTL/LTR Support

The toast component automatically adapts to different text directions as specified in the Figma design:

<Canvas of={SonnerStories.RTLSupport} />

In RTL mode:
- Icon and close button positions are mirrored
- Text alignment changes to right-aligned
- Layout flows from right to left
- Proper Arabic text rendering with Outfit font

## Custom Icons

Replace the default type icons with your own custom icons:

<Canvas of={SonnerStories.CustomIcon} />

<Source
  language="tsx"
  code={`
import { IconHeart } from '@tabler/icons-react';

showSonner.info({
  title: 'Liked!',
  description: 'You liked this post.',
  icon: <IconHeart size={16} style={{ color: '#e74c3c' }} />,
  iconBackground: true // or false to show without background
});
`}
/>

## Long Content

Sonner handles long content gracefully with proper text wrapping:

<Canvas of={SonnerStories.LongContent} />

## Multiple Toasts

Show multiple toasts and manage them collectively:

<Canvas of={SonnerStories.MultipleToasts} />

<Source
  language="tsx"
  code={`
// Show multiple toasts
showSonner.success({ title: 'First', description: 'First toast' });
showSonner.info({ title: 'Second', description: 'Second toast' });
showSonner.warning({ title: 'Third', description: 'Third toast' });

// Dismiss all toasts
showSonner.dismissAll();

// Dismiss specific toast
const toastId = showSonner.info({ title: 'Toast', description: 'Message' });
showSonner.dismiss(toastId);
`}
/>

## Different Positions

Position toasts in different areas of the screen:

<Canvas of={SonnerStories.DifferentPositions} />

## Close Button

Enable a close button for manual dismissal:

<Canvas of={SonnerStories.WithCloseButton} />

## API Reference

### Sonner Component Props

<ArgTypes of={SonnerStories} />

### showSonner Methods

| Method | Description | Parameters |
|--------|-------------|------------|
| `showSonner.success(options)` | Show success toast | `SonnerToastOptions` |
| `showSonner.error(options)` | Show error toast | `SonnerToastOptions` |
| `showSonner.warning(options)` | Show warning toast | `SonnerToastOptions` |
| `showSonner.info(options)` | Show info toast | `SonnerToastOptions` |
| `showSonner.loading(options)` | Show loading toast | `SonnerToastOptions` |
| `showSonner.custom(options)` | Show custom toast | `SonnerToastOptions` |
| `showSonner.dismiss(id?)` | Dismiss specific toast | `string \| number` (optional) |
| `showSonner.dismissAll()` | Dismiss all toasts | - |

### SonnerToastOptions

| Property | Type | Default | Description |
|----------|------|---------|-------------|
| `id` | `string \| number` | - | Unique identifier for the toast |
| `title` | `string` | - | The main title text of the toast |
| `description` | `string` | - | The description text below the title |
| `duration` | `number` | `4000` | How long the toast should be visible (in milliseconds) |
| `icon` | `React.ReactNode` | - | Custom icon to display (overrides default type icon) |
| `iconBackground` | `boolean` | `true` | Whether to show a background container around the icon |
| `action` | `{ label: string; onClick: () => void }` | - | Primary action button |
| `cancel` | `{ label: string; onClick: () => void }` | - | Secondary cancel button |
| `onDismiss` | `() => void` | - | Callback when toast is manually dismissed |
| `onAutoClose` | `() => void` | - | Callback when toast auto-closes |

## Design Specifications

Based on the Figma design, the component uses these exact specifications:

### Colors
- **Error Background**: #d51e25
- **Success Background**: #00ae61  
- **Default Background**: #ffffff
- **Icon Background (colored toasts)**: rgba(255, 255, 255, 0.2)
- **Icon Background (default toast)**: #f9f9fa
- **Text on colored backgrounds**: #ffffff
- **Primary text (default)**: #16161d
- **Secondary text (default)**: #7d8096

### Typography
- **Title**: Outfit Medium, 16px, line-height 1.5
- **Description**: Outfit Regular, 14px, line-height 1.5

### Spacing
- **Toast padding**: 12px
- **Gap between content and close button**: 8px
- **Gap between icon and text**: 3px
- **Gap between title and description**: 2px
- **Icon size**: 20px
- **Icon background padding**: 12px

### Effects
- **Shadow**: 0px 8px 16px -4px rgba(26, 26, 26, 0.22)
- **Border radius**: 8px (toast), 4px (icon background) 