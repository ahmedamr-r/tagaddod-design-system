{"version":3,"file":"Drawer.cjs.js","sources":["../../../src/components/Drawer/Drawer.tsx"],"sourcesContent":["import React, { forwardRef, useEffect, useState } from 'react';\nimport clsx from 'clsx';\nimport { Drawer as VaulDrawer } from 'vaul';\nimport { IconX, IconArrowLeft, IconArrowRight } from '@tabler/icons-react';\nimport { Button } from '../Button/Button';\nimport styles from './Drawer.module.css';\n\nexport type DrawerSize = 'small' | 'medium' | 'large';\nexport type DrawerPosition = 'right' | 'left';\n\nexport interface DrawerProps {\n  /**\n   * Whether the drawer is open\n   */\n  open: boolean;\n  \n  /**\n   * Callback function when the drawer open state changes\n   */\n  onOpenChange: (open: boolean) => void;\n  \n  /**\n   * The drawer title\n   */\n  title?: React.ReactNode;\n  \n  /**\n   * Component to display before the title\n   */\n  headerPrefix?: React.ReactNode;\n  \n  /**\n   * Component to display after the title, before the close button\n   */\n  headerSuffix?: React.ReactNode;\n  \n  /**\n   * Whether to show the back button\n   * @default false\n   */\n  showBackButton?: boolean;\n  \n  /**\n   * Whether to show the title\n   * @default true\n   */\n  showTitle?: boolean;\n  \n  /**\n   * Whether to show the close button\n   * @default true\n   */\n  showClose?: boolean;\n  \n  /**\n   * Whether to show the footer\n   * @default false\n   */\n  showFooter?: boolean;\n  \n  /**\n   * Content to be displayed in the footer\n   */\n  footerContent?: React.ReactNode;\n  \n  /**\n   * Primary action for the footer\n   */\n  primaryAction?: {\n    label: string;\n    onClick: () => void;\n    disabled?: boolean;\n    loading?: boolean;\n    variant?: 'primary' | 'secondary' | 'tertiary' | 'plain';\n    tone?: 'default' | 'critical' | 'success' | 'neutral' | 'magic';\n  };\n  \n  /**\n   * Secondary action for the footer\n   */\n  secondaryAction?: {\n    label: string;\n    onClick: () => void;\n    disabled?: boolean;\n    variant?: 'primary' | 'secondary' | 'tertiary' | 'plain';\n    tone?: 'default' | 'critical' | 'success' | 'neutral' | 'magic';\n  };\n  \n  /**\n   * Callback when back button is clicked\n   */\n  onBackClick?: () => void;\n  \n  /**\n   * The size of the drawer\n   * @default 'medium'\n   */\n  size?: DrawerSize;\n  \n  /**\n   * The position of the drawer\n   * @default 'right'\n   */\n  position?: DrawerPosition;\n  \n  /**\n   * Additional class name\n   */\n  className?: string;\n  \n  /**\n   * Children to be rendered in the drawer content\n   */\n  children: React.ReactNode;\n  \n  /**\n   * Custom overlay opacity (0-1)\n   * @default 0.7\n   */\n  overlayOpacity?: number;\n  \n  /**\n   * Whether to blur the background when the drawer is open\n   * @default true\n   */\n  blurBackground?: boolean;\n  \n  /**\n   * Use the bg-surface token for background (--t-color-surface-background)\n   * This is white by default in the Tagaddod Design System\n   * @default true\n   */\n  useSurfaceBackground?: boolean;\n  \n  /**\n   * Use full viewport height \n   * @default true\n   */\n  fullHeight?: boolean;\n}\n\nexport const drawerSizes = ['small', 'medium', 'large'] as const;\nexport const drawerPositions = ['right', 'left'] as const;\n\nexport const Drawer = forwardRef<HTMLDivElement, DrawerProps>(({\n  open,\n  onOpenChange,\n  title,\n  headerPrefix,\n  headerSuffix,\n  showBackButton = false,\n  showTitle = true,\n  showClose = true,\n  showFooter = false,\n  footerContent,\n  primaryAction,\n  secondaryAction,\n  onBackClick,\n  size = 'medium',\n  position = 'right',\n  className = '',\n  overlayOpacity = 0.7,\n  blurBackground = true,\n  useSurfaceBackground = true, // Default to using the surface background color\n  fullHeight = true, // Default to full height\n  children,\n  ...props\n}, ref) => {\n  // Check if current direction is RTL\n  const [isRTL, setIsRTL] = useState(false);\n  \n  useEffect(() => {\n    const dir = document.dir || document.documentElement.dir;\n    setIsRTL(dir === 'rtl');\n  }, []);\n  \n  // Adjust position based on RTL\n  const adjustedPosition = isRTL \n    ? (position === 'right' ? 'left' : 'right') \n    : position;\n  \n  // Apply line height style based on text direction\n  const lineHeightStyle = {\n    lineHeight: isRTL ? 'var(--t-line-height-arabic, 1.2)' : 'var(--t-line-height-english, 1.5)'\n  };\n  \n  // Callback when back button is clicked\n  const handleBackClick = () => {\n    if (onBackClick) {\n      onBackClick();\n    } else {\n      onOpenChange(false);\n    }\n  };\n  \n  // Get correct back arrow icon based on direction\n  const BackArrowIcon = isRTL ? IconArrowRight : IconArrowLeft;\n  \n  // Combine all classes for the drawer\n  const drawerClasses = clsx(\n    styles.drawer,\n    styles[`size${size.charAt(0).toUpperCase() + size.slice(1)}`],\n    styles[`position${adjustedPosition.charAt(0).toUpperCase() + adjustedPosition.slice(1)}`],\n    className\n  );\n  \n  // Create custom overlay style with specified opacity\n  const overlayStyle = {\n    backgroundColor: `rgba(0, 0, 0, ${overlayOpacity})`,\n    backdropFilter: blurBackground ? 'blur(2px)' : 'none',\n  };\n  \n  // Create custom drawer style\n  const drawerStyle = {\n    backgroundColor: useSurfaceBackground ? 'var(--t-color-surface-primary)' : undefined,\n    height: fullHeight ? '100vh' : undefined,\n    maxHeight: fullHeight ? '100vh' : undefined,\n  };\n  \n  return (\n    <VaulDrawer.Root\n      open={open}\n      onOpenChange={onOpenChange}\n      direction={adjustedPosition}\n      shouldScaleBackground\n      modal={true} // Ensure it's modal for better accessibility\n    >\n      <VaulDrawer.Portal>\n        <VaulDrawer.Overlay className={styles.overlay} style={overlayStyle} />\n        <VaulDrawer.Content \n          ref={ref} \n          className={drawerClasses} \n          data-direction={adjustedPosition}\n          style={drawerStyle}\n          {...props}\n        >\n          {/* Header */}\n          <div className={styles.header}>\n            <div className={styles.headerContent}>\n              {showBackButton && (\n                <Button \n                  variant=\"plain\" \n                  onClick={handleBackClick}\n                  aria-label={isRTL ? 'التالي' : 'Back'}\n                  className={styles.backButton}\n                  prefixIcon={<BackArrowIcon size={20} />}\n                />\n              )}\n              \n              {headerPrefix && (\n                <div className={styles.headerPrefix}>\n                  {headerPrefix}\n                </div>\n              )}\n              \n              {showTitle && title && (\n                <h2 className={styles.title} style={lineHeightStyle}>\n                  {title}\n                </h2>\n              )}\n              \n              {headerSuffix && (\n                <div className={styles.headerSuffix}>\n                  {headerSuffix}\n                </div>\n              )}\n            </div>\n            \n            {showClose && (\n              <Button \n                variant=\"plain\" \n                onClick={() => onOpenChange(false)}\n                aria-label={isRTL ? 'إغلاق' : 'Close'}\n                className={styles.closeButton}\n                prefixIcon={<IconX size={20} />}\n              />\n            )}\n          </div>\n          \n          {/* Content */}\n          <div className={styles.content}>\n            {children}\n          </div>\n          \n          {/* Footer */}\n          {showFooter && (\n            <div className={styles.footer}>\n              {footerContent && (\n                <div className={styles.footerContent}>\n                  {footerContent}\n                </div>\n              )}\n              \n              <div className={styles.actions}>\n                {secondaryAction && (\n                  <Button \n                    variant={secondaryAction.variant || 'secondary'}\n                    tone={secondaryAction.tone || 'default'}\n                    onClick={secondaryAction.onClick}\n                    disabled={secondaryAction.disabled}\n                    className={styles.footerButton}\n                  >\n                    {secondaryAction.label}\n                  </Button>\n                )}\n                \n                {primaryAction && (\n                  <Button \n                    variant={primaryAction.variant || 'primary'}\n                    tone={primaryAction.tone || 'default'}\n                    onClick={primaryAction.onClick}\n                    disabled={primaryAction.disabled}\n                    loading={primaryAction.loading}\n                    className={styles.footerButton}\n                  >\n                    {primaryAction.label}\n                  </Button>\n                )}\n              </div>\n            </div>\n          )}\n        </VaulDrawer.Content>\n      </VaulDrawer.Portal>\n    </VaulDrawer.Root>\n  );\n});\n\nDrawer.displayName = 'Drawer';\n"],"names":["forwardRef","useState","useEffect","clsx","styles","jsx","VaulDrawer","jsxs","Button"],"mappings":"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"}