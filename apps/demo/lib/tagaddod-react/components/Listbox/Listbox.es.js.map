{"version":3,"file":"Listbox.es.js","sources":["../../../src/components/Listbox/Listbox.tsx"],"sourcesContent":["import React from 'react';\nimport clsx from 'clsx';\nimport styles from './Listbox.module.css';\nimport { ListboxOption, ListboxOptionProps } from './ListboxOption';\n\nexport interface ListboxProps {\n  /**\n   * Array of options to display in the listbox\n   */\n  options: Array<Omit<ListboxOptionProps, 'onClick' | 'role' | 'tabIndex' | 'aria-selected'>>;\n  /**\n   * Currently selected option value(s)\n   */\n  selectedValue?: string | number | Array<string | number>;\n  /**\n   * Maximum number of options to display (prevents showing over 5)\n   */\n  maxVisibleOptions?: number;\n  /**\n   * Whether multiple options can be selected\n   */\n  multiple?: boolean;\n  /**\n   * Handler for when an option is selected\n   */\n  onSelect?: (value: string | number) => void;\n  /**\n   * Handler for when multiple options are selected (when multiple=true)\n   */\n  onMultiSelect?: (values: Array<string | number>) => void;\n  /**\n   * Additional CSS class name\n   */\n  className?: string;\n  /**\n   * ID attribute for the listbox\n   */\n  id?: string;\n  /**\n   * ARIA label for the listbox\n   */\n  'aria-label'?: string;\n  /**\n   * ID of the element that labels this listbox\n   */\n  'aria-labelledby'?: string;\n  /**\n   * Pass true if this is rendered inside a Popover\n   */\n  inPopover?: boolean;\n}\n\nexport const Listbox: React.FC<ListboxProps> = ({\n  options,\n  selectedValue,\n  maxVisibleOptions = 5,\n  multiple = false,\n  onSelect,\n  onMultiSelect,\n  className,\n  id,\n  'aria-label': ariaLabel,\n  'aria-labelledby': ariaLabelledby,\n  inPopover = true,\n  ...props\n}) => {\n  // If selectedValue is an array but multiple is false, take the first value\n  const normalizedSelectedValue = !multiple && Array.isArray(selectedValue) \n    ? selectedValue[0] \n    : selectedValue;\n\n  // Limit the number of visible options\n  const limitedOptions = options.slice(0, maxVisibleOptions);\n\n  // Handle option selection\n  const handleOptionSelect = (value: string | number) => {\n    if (multiple) {\n      if (onMultiSelect && Array.isArray(selectedValue)) {\n        const newValues = selectedValue.includes(value)\n          ? selectedValue.filter(v => v !== value)\n          : [...selectedValue, value];\n        onMultiSelect(newValues);\n      }\n    } else {\n      if (onSelect) {\n        onSelect(value);\n      }\n    }\n  };\n\n  return (\n    <div\n      role=\"listbox\"\n      id={id}\n      aria-label={ariaLabel}\n      aria-labelledby={ariaLabelledby}\n      aria-multiselectable={multiple}\n      className={clsx(\n        styles.listbox,\n        inPopover && styles.inPopover,\n        className\n      )}\n      tabIndex={-1}\n      {...props}\n    >\n      {limitedOptions.map((option) => {\n        const isSelected = multiple && Array.isArray(selectedValue)\n          ? selectedValue.includes(option.value)\n          : normalizedSelectedValue === option.value;\n          \n        return (\n          <ListboxOption\n            key={option.value}\n            {...option}\n            selected={isSelected}\n            onClick={handleOptionSelect}\n            role=\"option\"\n            aria-selected={isSelected}\n            tabIndex={-1}\n          />\n        );\n      })}\n      {options.length > maxVisibleOptions && (\n        <div className={styles.moreOptions}>\n          +{options.length - maxVisibleOptions} more options\n        </div>\n      )}\n    </div>\n  );\n};\n\nexport default Listbox;\n"],"names":["jsxs","jsx"],"mappings":";;;;AAoDO,MAAM,UAAkC,CAAC;AAAA,EAC9C;AAAA,EACA;AAAA,EACA,oBAAoB;AAAA,EACpB,WAAW;AAAA,EACX;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA,cAAc;AAAA,EACd,mBAAmB;AAAA,EACnB,YAAY;AAAA,EACZ,GAAG;AACL,MAAM;AAEE,QAAA,0BAA0B,CAAC,YAAY,MAAM,QAAQ,aAAa,IACpE,cAAc,CAAC,IACf;AAGJ,QAAM,iBAAiB,QAAQ,MAAM,GAAG,iBAAiB;AAGnD,QAAA,qBAAqB,CAAC,UAA2B;AACrD,QAAI,UAAU;AACZ,UAAI,iBAAiB,MAAM,QAAQ,aAAa,GAAG;AACjD,cAAM,YAAY,cAAc,SAAS,KAAK,IAC1C,cAAc,OAAO,CAAK,MAAA,MAAM,KAAK,IACrC,CAAC,GAAG,eAAe,KAAK;AAC5B,sBAAc,SAAS;AAAA,MAAA;AAAA,IACzB,OACK;AACL,UAAI,UAAU;AACZ,iBAAS,KAAK;AAAA,MAAA;AAAA,IAChB;AAAA,EAEJ;AAGE,SAAAA,kCAAA;AAAA,IAAC;AAAA,IAAA;AAAA,MACC,MAAK;AAAA,MACL;AAAA,MACA,cAAY;AAAA,MACZ,mBAAiB;AAAA,MACjB,wBAAsB;AAAA,MACtB,WAAW;AAAA,QACT,OAAO;AAAA,QACP,aAAa,OAAO;AAAA,QACpB;AAAA,MACF;AAAA,MACA,UAAU;AAAA,MACT,GAAG;AAAA,MAEH,UAAA;AAAA,QAAe,eAAA,IAAI,CAAC,WAAW;AAC9B,gBAAM,aAAa,YAAY,MAAM,QAAQ,aAAa,IACtD,cAAc,SAAS,OAAO,KAAK,IACnC,4BAA4B,OAAO;AAGrC,iBAAAC,kCAAA;AAAA,YAAC;AAAA,YAAA;AAAA,cAEE,GAAG;AAAA,cACJ,UAAU;AAAA,cACV,SAAS;AAAA,cACT,MAAK;AAAA,cACL,iBAAe;AAAA,cACf,UAAU;AAAA,YAAA;AAAA,YANL,OAAO;AAAA,UAOd;AAAA,QAAA,CAEH;AAAA,QACA,QAAQ,SAAS,4DACf,OAAI,EAAA,WAAW,OAAO,aAAa,UAAA;AAAA,UAAA;AAAA,UAChC,QAAQ,SAAS;AAAA,UAAkB;AAAA,QAAA,EACvC,CAAA;AAAA,MAAA;AAAA,IAAA;AAAA,EAEJ;AAEJ;"}