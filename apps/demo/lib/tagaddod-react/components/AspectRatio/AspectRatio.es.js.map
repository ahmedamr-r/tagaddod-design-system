{"version":3,"file":"AspectRatio.es.js","sources":["../../../src/components/AspectRatio/AspectRatio.tsx"],"sourcesContent":["import React, { forwardRef, useEffect, useRef } from 'react';\nimport clsx from 'clsx';\nimport styles from './AspectRatio.module.css';\n\nexport interface AspectRatioProps extends React.HTMLAttributes<HTMLDivElement> {\n  /**\n   * The ratio of the container's width to height (e.g., 16/9, 4/3, 1, etc.)\n   * @default 1\n   */\n  ratio?: number;\n  \n  /**\n   * Custom class name for the container\n   */\n  className?: string;\n  \n  /**\n   * Content to be displayed within the aspect ratio container\n   */\n  children: React.ReactNode;\n}\n\n/**\n * Check if the browser supports the aspect-ratio CSS property\n */\nconst supportsAspectRatio = () => {\n  if (typeof window === 'undefined') return true; // SSR fallback\n  return CSS.supports('aspect-ratio', '1');\n};\n\nexport const AspectRatio = forwardRef<HTMLDivElement, AspectRatioProps>(({\n  ratio = 1,\n  className = '',\n  children,\n  style = {},\n  ...props\n}, ref) => {\n  const containerRef = useRef<HTMLDivElement | null>(null);\n  const hasAspectRatioSupport = supportsAspectRatio();\n  \n  // For modern browsers: use the aspect-ratio CSS property\n  const combinedStyle = hasAspectRatioSupport\n    ? {\n        aspectRatio: `${ratio}`,\n        ...style,\n      }\n    : {\n        ...style,\n      };\n\n  // For older browsers: use the padding-top hack\n  useEffect(() => {\n    // Skip if aspect-ratio is supported or if we're in SSR\n    if (hasAspectRatioSupport || !containerRef.current) return;\n\n    // For browsers without aspect-ratio support, apply the padding-top hack\n    const paddingTop = `${(1 / ratio) * 100}%`;\n    containerRef.current.style.setProperty('padding-top', paddingTop);\n    \n    // Ensure content is positioned absolutely\n    const child = containerRef.current.firstElementChild as HTMLElement;\n    if (child) {\n      child.style.position = 'absolute';\n      child.style.top = '0';\n      child.style.left = '0';\n      child.style.width = '100%';\n      child.style.height = '100%';\n    }\n    \n    // Cleanup function\n    return () => {\n      if (containerRef.current) {\n        containerRef.current.style.removeProperty('padding-top');\n      }\n    };\n  }, [ratio, hasAspectRatioSupport]);\n\n  // Use both the forwarded ref and the internal ref\n  const setRefs = (element: HTMLDivElement | null) => {\n    containerRef.current = element;\n    \n    // Handle forwarded ref\n    if (ref) {\n      if (typeof ref === 'function') {\n        ref(element);\n      } else {\n        // Handle React.MutableRefObject safely\n        (ref as React.MutableRefObject<HTMLDivElement | null>).current = element;\n      }\n    }\n  };\n\n  return (\n    <div\n      ref={setRefs}\n      className={clsx(styles.container, !hasAspectRatioSupport && styles.fallback, className)}\n      style={combinedStyle}\n      {...props}\n    >\n      {children}\n    </div>\n  );\n});\n\nAspectRatio.displayName = 'AspectRatio';\n"],"names":["jsx"],"mappings":";;;;AAyBA,MAAM,sBAAsB,MAAM;AAC5B,MAAA,OAAO,WAAW,YAAoB,QAAA;AACnC,SAAA,IAAI,SAAS,gBAAgB,GAAG;AACzC;AAEa,MAAA,cAAc,WAA6C,CAAC;AAAA,EACvE,QAAQ;AAAA,EACR,YAAY;AAAA,EACZ;AAAA,EACA,QAAQ,CAAC;AAAA,EACT,GAAG;AACL,GAAG,QAAQ;AACH,QAAA,eAAe,OAA8B,IAAI;AACvD,QAAM,wBAAwB,oBAAoB;AAGlD,QAAM,gBAAgB,wBAClB;AAAA,IACE,aAAa,GAAG,KAAK;AAAA,IACrB,GAAG;AAAA,EAAA,IAEL;AAAA,IACE,GAAG;AAAA,EACL;AAGJ,YAAU,MAAM;AAEV,QAAA,yBAAyB,CAAC,aAAa,QAAS;AAGpD,UAAM,aAAa,GAAI,IAAI,QAAS,GAAG;AACvC,iBAAa,QAAQ,MAAM,YAAY,eAAe,UAAU;AAG1D,UAAA,QAAQ,aAAa,QAAQ;AACnC,QAAI,OAAO;AACT,YAAM,MAAM,WAAW;AACvB,YAAM,MAAM,MAAM;AAClB,YAAM,MAAM,OAAO;AACnB,YAAM,MAAM,QAAQ;AACpB,YAAM,MAAM,SAAS;AAAA,IAAA;AAIvB,WAAO,MAAM;AACX,UAAI,aAAa,SAAS;AACX,qBAAA,QAAQ,MAAM,eAAe,aAAa;AAAA,MAAA;AAAA,IAE3D;AAAA,EAAA,GACC,CAAC,OAAO,qBAAqB,CAAC;AAG3B,QAAA,UAAU,CAAC,YAAmC;AAClD,iBAAa,UAAU;AAGvB,QAAI,KAAK;AACH,UAAA,OAAO,QAAQ,YAAY;AAC7B,YAAI,OAAO;AAAA,MAAA,OACN;AAEJ,YAAsD,UAAU;AAAA,MAAA;AAAA,IACnE;AAAA,EAEJ;AAGE,SAAAA,kCAAA;AAAA,IAAC;AAAA,IAAA;AAAA,MACC,KAAK;AAAA,MACL,WAAW,KAAK,OAAO,WAAW,CAAC,yBAAyB,OAAO,UAAU,SAAS;AAAA,MACtF,OAAO;AAAA,MACN,GAAG;AAAA,MAEH;AAAA,IAAA;AAAA,EACH;AAEJ,CAAC;AAED,YAAY,cAAc;"}