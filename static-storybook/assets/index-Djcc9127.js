import{R as g,r as a}from"./index-BlmOqGMO.js";import{c as w}from"./index-DW48STyt.js";import{c as j,u as P,a as G,P as L}from"./index-CfQheYXo.js";import{j as m}from"./jsx-runtime-Cf8x2fCZ.js";import{u as $}from"./index-pvuVTQ3b.js";import{u as J}from"./index-DZCApzUK.js";import{u as Q}from"./index-B2x4RDPN.js";function W(e){const o=e+"CollectionProvider",[u,n]=j(o),[A,v]=u(o,{collectionRef:{current:null},itemMap:new Map}),I=f=>{const{scope:t,children:i}=f,d=g.useRef(null),r=g.useRef(new Map).current;return m.jsx(A,{scope:t,itemMap:r,collectionRef:d,children:i})};I.displayName=o;const R=e+"CollectionSlot",_=G(R),p=g.forwardRef((f,t)=>{const{scope:i,children:d}=f,r=v(R,i),c=P(t,r.collectionRef);return m.jsx(_,{ref:c,children:d})});p.displayName=R;const s=e+"CollectionItemSlot",C="data-radix-collection-item",E=G(s),b=g.forwardRef((f,t)=>{const{scope:i,children:d,...r}=f,c=g.useRef(null),x=P(t,c),T=v(s,i);return g.useEffect(()=>(T.itemMap.set(c,{ref:c,...r}),()=>void T.itemMap.delete(c))),m.jsx(E,{[C]:"",ref:x,children:d})});b.displayName=s;function F(f){const t=v(e+"CollectionConsumer",f);return g.useCallback(()=>{const d=t.collectionRef.current;if(!d)return[];const r=Array.from(d.querySelectorAll(`[${C}]`));return Array.from(t.itemMap.values()).sort((T,y)=>r.indexOf(T.ref.current)-r.indexOf(y.ref.current))},[t.collectionRef,t.itemMap])}return[{Provider:I,Slot:p,ItemSlot:b},F,n]}var X=a.createContext(void 0);function Z(e){const o=a.useContext(X);return e||o||"ltr"}var N="rovingFocusGroup.onEntryFocus",ee={bubbles:!1,cancelable:!0},h="RovingFocusGroup",[D,K,te]=W(h),[oe,Ce]=j(h,[te]),[re,ne]=oe(h),k=a.forwardRef((e,o)=>m.jsx(D.Provider,{scope:e.__scopeRovingFocusGroup,children:m.jsx(D.Slot,{scope:e.__scopeRovingFocusGroup,children:m.jsx(ce,{...e,ref:o})})}));k.displayName=h;var ce=a.forwardRef((e,o)=>{const{__scopeRovingFocusGroup:u,orientation:n,loop:A=!1,dir:v,currentTabStopId:I,defaultCurrentTabStopId:R,onCurrentTabStopIdChange:_,onEntryFocus:p,preventScrollOnEntryFocus:s=!1,...C}=e,E=a.useRef(null),b=P(o,E),F=Z(v),[f,t]=Q({prop:I,defaultProp:R??null,onChange:_,caller:h}),[i,d]=a.useState(!1),r=J(p),c=K(u),x=a.useRef(!1),[T,y]=a.useState(0);return a.useEffect(()=>{const l=E.current;if(l)return l.addEventListener(N,r),()=>l.removeEventListener(N,r)},[r]),m.jsx(re,{scope:u,orientation:n,dir:F,loop:A,currentTabStopId:f,onItemFocus:a.useCallback(l=>t(l),[t]),onItemShiftTab:a.useCallback(()=>d(!0),[]),onFocusableItemAdd:a.useCallback(()=>y(l=>l+1),[]),onFocusableItemRemove:a.useCallback(()=>y(l=>l-1),[]),children:m.jsx(L.div,{tabIndex:i||T===0?-1:0,"data-orientation":n,...C,ref:b,style:{outline:"none",...e.style},onMouseDown:w(e.onMouseDown,()=>{x.current=!0}),onFocus:w(e.onFocus,l=>{const Y=!x.current;if(l.target===l.currentTarget&&Y&&!i){const O=new CustomEvent(N,ee);if(l.currentTarget.dispatchEvent(O),!O.defaultPrevented){const M=c().filter(S=>S.focusable),H=M.find(S=>S.active),q=M.find(S=>S.id===f),z=[H,q,...M].filter(Boolean).map(S=>S.ref.current);V(z,s)}}x.current=!1}),onBlur:w(e.onBlur,()=>d(!1))})})}),U="RovingFocusGroupItem",B=a.forwardRef((e,o)=>{const{__scopeRovingFocusGroup:u,focusable:n=!0,active:A=!1,tabStopId:v,children:I,...R}=e,_=$(),p=v||_,s=ne(U,u),C=s.currentTabStopId===p,E=K(u),{onFocusableItemAdd:b,onFocusableItemRemove:F,currentTabStopId:f}=s;return a.useEffect(()=>{if(n)return b(),()=>F()},[n,b,F]),m.jsx(D.ItemSlot,{scope:u,id:p,focusable:n,active:A,children:m.jsx(L.span,{tabIndex:C?0:-1,"data-orientation":s.orientation,...R,ref:o,onMouseDown:w(e.onMouseDown,t=>{n?s.onItemFocus(p):t.preventDefault()}),onFocus:w(e.onFocus,()=>s.onItemFocus(p)),onKeyDown:w(e.onKeyDown,t=>{if(t.key==="Tab"&&t.shiftKey){s.onItemShiftTab();return}if(t.target!==t.currentTarget)return;const i=ae(t,s.orientation,s.dir);if(i!==void 0){if(t.metaKey||t.ctrlKey||t.altKey||t.shiftKey)return;t.preventDefault();let r=E().filter(c=>c.focusable).map(c=>c.ref.current);if(i==="last")r.reverse();else if(i==="prev"||i==="next"){i==="prev"&&r.reverse();const c=r.indexOf(t.currentTarget);r=s.loop?ue(r,c+1):r.slice(c+1)}setTimeout(()=>V(r))}}),children:typeof I=="function"?I({isCurrentTabStop:C,hasTabStop:f!=null}):I})})});B.displayName=U;var se={ArrowLeft:"prev",ArrowUp:"prev",ArrowRight:"next",ArrowDown:"next",PageUp:"first",Home:"first",PageDown:"last",End:"last"};function ie(e,o){return o!=="rtl"?e:e==="ArrowLeft"?"ArrowRight":e==="ArrowRight"?"ArrowLeft":e}function ae(e,o,u){const n=ie(e.key,u);if(!(o==="vertical"&&["ArrowLeft","ArrowRight"].includes(n))&&!(o==="horizontal"&&["ArrowUp","ArrowDown"].includes(n)))return se[n]}function V(e,o=!1){const u=document.activeElement;for(const n of e)if(n===u||(n.focus({preventScroll:o}),document.activeElement!==u))return}function ue(e,o){return e.map((u,n)=>e[(o+n)%e.length])}var be=k,Se=B;export{Se as I,be as R,Ce as c,Z as u};
